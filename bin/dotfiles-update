#!/bin/bash

SUBTREES=(
.oh-my-zsh https://github.com/robbyrussell/oh-my-zsh.git
.vim/bundle/Vundle.vim https://github.com/gmarik/Vundle.vim
.vim/bundle/jasmine.vim https://github.com/claco/jasmine.vim.git
.vim/bundle/javascript-libraries-syntax.vim https://github.com/othree/javascript-libraries-syntax.vim
.vim/bundle/syntastic https://github.com/scrooloose/syntastic.git
.vim/bundle/vim-angular https://github.com/burnettk/vim-angular.git
.vim/bundle/vim-javascript https://github.com/pangloss/vim-javascript.git
.vim/bundle/vim-gradle https://github.com/tfnico/vim-gradle.git
.vim/bundle/vim-less https://github.com/groenewege/vim-less.git
.vim/bundle/typescript-vim https://github.com/leafgarland/typescript-vim
.vim/bundle/vim-go https://github.com/fatih/vim-go.git
.vim/bundle/editorconfig-vim https://github.com/editorconfig/editorconfig-vim.git
.vim/bundle/nginx.vim https://github.com/vim-scripts/nginx.vim.git
)

for ((i = 0; i <= ${#SUBTREES[@]}; i += 2)) ; do
    if [ ! -d "${SUBTREES[i]}" ] ; then
        git subtree add --prefix ${SUBTREES[i]} ${SUBTREES[i+1]} master --squash
    else
        git subtree pull --prefix ${SUBTREES[i]} ${SUBTREES[i+1]} master --squash -m "Merge subtree for '${SUBTREES[i]}'"
    fi
done
